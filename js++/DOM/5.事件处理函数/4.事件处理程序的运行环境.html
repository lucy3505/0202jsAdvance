<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button>点击</button>
    <script>
      //事件处理程序的运行环境->this

      var oBtn = document.getElementsByTagName("button")[0];
      // oBtn.onclick = function () {
      //   console.log(this); //oBtn
      // };
      // oBtn.addEventListener(
      //   "click",
      //   function () {
      //     console.log(this); //oBtn
      //   },
      //   false
      // );

      // oBtn.attachEvent("onclick", function () {
      //   console.log(this); //window  改变this指向
      //   test.call(oBtn);
      // });

      // function test() {
      //   console.log(this);
      // }
      addEvent(oBtn, "click", function () {
        console.log(2);
      });

      //封装
      function addEvent(el, type, fn) {
        if (el.addEventListener) {
          el.addEventListener(type, fn, false);
        } else if (el.attachEvent) {
          el.attachEvent("on" + type, function () {
            fn.call(el);
          });
        } else {
          el["on" + type] = fn;
        }
      }

      //解除事件处理函数
      element.onclick = null / false;
      element.removeEventListener("click", test, false);
      el.detachEvent("onclick", test);
    </script>
  </body>
</html>
